{"version":3,"file":"bs-stepper.min.js","sources":["../../src/js/polyfill.js","../../src/js/util.js","../../src/js/listeners.js","../../src/js/index.js"],"sourcesContent":["let matches = window.Element.prototype.matches\nlet closest = (element, selector) => element.closest(selector)\nlet WinEvent = (inType, params) => new window.Event(inType, params)\nlet createCustomEvent = (eventName, params) => {\n  const cEvent = new window.CustomEvent(eventName, params)\n\n  return cEvent\n}\n\n/* istanbul ignore next */\nfunction polyfill () {\n  if (!window.Element.prototype.matches) {\n    matches = window.Element.prototype.msMatchesSelector ||\n      window.Element.prototype.webkitMatchesSelector\n  }\n\n  if (!window.Element.prototype.closest) {\n    closest = (element, selector) => {\n      if (!document.documentElement.contains(element)) {\n        return null\n      }\n\n      do {\n        if (matches.call(element, selector)) {\n          return element\n        }\n\n        element = element.parentElement || element.parentNode\n      } while (element !== null && element.nodeType === 1)\n\n      return null\n    }\n  }\n\n  if (!window.Event || typeof window.Event !== 'function') {\n    WinEvent = (inType, params) => {\n      params = params || {}\n      const e = document.createEvent('Event')\n      e.initEvent(inType, Boolean(params.bubbles), Boolean(params.cancelable))\n      return e\n    }\n  }\n\n  if (typeof window.CustomEvent !== 'function') {\n    const originPreventDefault = window.Event.prototype.preventDefault\n\n    createCustomEvent = (eventName, params) => {\n      const evt = document.createEvent('CustomEvent')\n\n      params = params || { bubbles: false, cancelable: false, detail: null }\n      evt.initCustomEvent(eventName, params.bubbles, params.cancelable, params.detail)\n      evt.preventDefault = function () {\n        if (!this.cancelable) {\n          return\n        }\n\n        originPreventDefault.call(this)\n        Object.defineProperty(this, 'defaultPrevented', {\n          get: function () { return true }\n        })\n      }\n\n      return evt\n    }\n  }\n}\n\npolyfill()\n\nexport {\n  closest,\n  WinEvent,\n  createCustomEvent\n}\n","import { WinEvent, createCustomEvent } from './polyfill'\n\nconst MILLISECONDS_MULTIPLIER = 1000\nconst Selectors = {\n  STEPS: '.step',\n  TRIGGER: '.step-trigger',\n  STEPPER: '.bs-stepper'\n}\n\nconst ClassName = {\n  ACTIVE: 'active',\n  LINEAR: 'linear',\n  BLOCK: 'dstepper-block',\n  NONE: 'dstepper-none',\n  FADE: 'fade'\n}\n\nconst transitionEndEvent = 'transitionend'\nconst customProperty = 'bsStepper'\n\nconst show = (stepperNode, indexStep) => {\n  const stepper = stepperNode[customProperty]\n\n  if (stepper._steps[indexStep].classList.contains(ClassName.ACTIVE) || stepper._stepsContents[indexStep].classList.contains(ClassName.ACTIVE)) {\n    return\n  }\n\n  const showEvent = createCustomEvent('show.bs-stepper', {\n    cancelable: true,\n    detail: {\n      indexStep\n    }\n  })\n  stepperNode.dispatchEvent(showEvent)\n\n  const activeStep = stepper._steps.filter(step => step.classList.contains(ClassName.ACTIVE))\n  const activeContent = stepper._stepsContents.filter(content => content.classList.contains(ClassName.ACTIVE))\n\n  if (showEvent.defaultPrevented) {\n    return\n  }\n\n  if (activeStep.length) {\n    activeStep[0].classList.remove(ClassName.ACTIVE)\n  }\n  if (activeContent.length) {\n    activeContent[0].classList.remove(ClassName.ACTIVE)\n    activeContent[0].classList.remove(ClassName.BLOCK)\n  }\n\n  showStep(stepperNode, stepper._steps[indexStep], stepper._steps)\n  showContent(stepperNode, stepper._stepsContents[indexStep], stepper._stepsContents, activeContent)\n}\n\nconst showStep = (stepperNode, step, stepList) => {\n  stepList.forEach(step => {\n    const trigger = step.querySelector(Selectors.TRIGGER)\n\n    trigger.setAttribute('aria-selected', 'false')\n    // if stepper is in linear mode, set disabled attribute on the trigger\n    if (stepperNode.classList.contains(ClassName.LINEAR)) {\n      trigger.setAttribute('disabled', 'disabled')\n    }\n  })\n\n  step.classList.add(ClassName.ACTIVE)\n  const currentTrigger = step.querySelector(Selectors.TRIGGER)\n\n  currentTrigger.setAttribute('aria-selected', 'true')\n  // if stepper is in linear mode, remove disabled attribute on current\n  if (stepperNode.classList.contains(ClassName.LINEAR)) {\n    currentTrigger.removeAttribute('disabled')\n  }\n}\n\nconst showContent = (stepperNode, content, contentList, activeContent) => {\n  const shownEvent = createCustomEvent('shown.bs-stepper', {\n    cancelable: true,\n    detail: {\n      indexStep: contentList.indexOf(content)\n    }\n  })\n\n  function complete () {\n    content.classList.add(ClassName.BLOCK)\n    content.removeEventListener(transitionEndEvent, complete)\n    stepperNode.dispatchEvent(shownEvent)\n  }\n\n  if (content.classList.contains(ClassName.FADE)) {\n    content.classList.remove(ClassName.NONE)\n    const duration = getTransitionDurationFromElement(content)\n\n    content.addEventListener(transitionEndEvent, complete)\n    if (activeContent.length) {\n      activeContent[0].classList.add(ClassName.NONE)\n    }\n\n    content.classList.add(ClassName.ACTIVE)\n    emulateTransitionEnd(content, duration)\n  } else {\n    content.classList.add(ClassName.ACTIVE)\n    stepperNode.dispatchEvent(shownEvent)\n  }\n}\n\nconst getTransitionDurationFromElement = element => {\n  if (!element) {\n    return 0\n  }\n\n  // Get transition-duration of the element\n  let transitionDuration = window.getComputedStyle(element).transitionDuration\n  const floatTransitionDuration = parseFloat(transitionDuration)\n\n  // Return 0 if element or transition duration is not found\n  if (!floatTransitionDuration) {\n    return 0\n  }\n\n  // If multiple durations are defined, take the first\n  transitionDuration = transitionDuration.split(',')[0]\n\n  return parseFloat(transitionDuration) * MILLISECONDS_MULTIPLIER\n}\n\nconst emulateTransitionEnd = (element, duration) => {\n  let called = false\n  const durationPadding = 5\n  const emulatedDuration = duration + durationPadding\n  function listener () {\n    called = true\n    element.removeEventListener(transitionEndEvent, listener)\n  }\n\n  element.addEventListener(transitionEndEvent, listener)\n  window.setTimeout(() => {\n    if (!called) {\n      element.dispatchEvent(WinEvent(transitionEndEvent))\n    }\n\n    element.removeEventListener(transitionEndEvent, listener)\n  }, emulatedDuration)\n}\n\nconst detectAnimation = (contentList, animation) => {\n  if (animation) {\n    contentList.forEach(content => {\n      content.classList.add(ClassName.FADE)\n      content.classList.add(ClassName.NONE)\n    })\n  }\n}\n\nexport {\n  show,\n  Selectors,\n  ClassName,\n  customProperty,\n  detectAnimation\n}\n","import { closest } from './polyfill'\nimport { Selectors, customProperty, show } from './util'\n\nfunction clickStepLinearListener (event) {\n  event.preventDefault()\n}\n\nfunction clickStepNonLinearListener (event) {\n  event.preventDefault()\n\n  const step = closest(event.target, Selectors.STEPS)\n  const stepperNode = closest(step, Selectors.STEPPER)\n  const stepper = stepperNode[customProperty]\n  const stepIndex = stepper._steps.indexOf(step)\n\n  stepper._currentIndex = stepIndex\n  show(stepperNode, stepIndex)\n}\n\nexport {\n  clickStepLinearListener,\n  clickStepNonLinearListener\n}\n","import { show, Selectors, ClassName, customProperty, detectAnimation } from './util'\nimport { clickStepLinearListener, clickStepNonLinearListener } from './listeners'\n\nconst DEFAULT_OPTIONS = {\n  linear: true,\n  animation: false\n}\n\nclass Stepper {\n  constructor (element, _options = {}) {\n    this._element = element\n    this._currentIndex = 0\n    this._stepsContents = []\n    this._steps = [].slice.call(this._element.querySelectorAll(Selectors.STEPS))\n      .filter(step => step.hasAttribute('data-target'))\n\n    this._steps.forEach(step => {\n      this._stepsContents.push(\n        this._element.querySelector(step.getAttribute('data-target'))\n      )\n    })\n\n    this.options = {\n      ...DEFAULT_OPTIONS,\n      ..._options\n    }\n\n    if (this.options.linear) {\n      this._element.classList.add(ClassName.LINEAR)\n    }\n\n    detectAnimation(this._stepsContents, this.options.animation)\n    this._setLinkListeners()\n    Object.defineProperty(this._element, customProperty, {\n      value: this,\n      writable: true\n    })\n\n    if (this._steps.length) {\n      show(this._element, this._currentIndex)\n    }\n  }\n\n  // Private\n\n  _setLinkListeners () {\n    this._steps.forEach(step => {\n      const trigger = step.querySelector(Selectors.TRIGGER)\n      if (this.options.linear) {\n        trigger.addEventListener('click', clickStepLinearListener)\n      } else {\n        trigger.addEventListener('click', clickStepNonLinearListener)\n      }\n    })\n  }\n\n  // Public\n\n  next () {\n    this._currentIndex = (this._currentIndex + 1) <= this._steps.length - 1 ? this._currentIndex + 1 : (this._steps.length - 1)\n\n    show(this._element, this._currentIndex)\n  }\n\n  previous () {\n    this._currentIndex = (this._currentIndex - 1) >= 0 ? this._currentIndex - 1 : 0\n\n    show(this._element, this._currentIndex)\n  }\n\n  to (stepNumber) {\n    const tempIndex = stepNumber - 1\n\n    this._currentIndex = tempIndex >= 0 && tempIndex < this._steps.length\n      ? tempIndex\n      : 0\n\n    show(this._element, this._currentIndex)\n  }\n\n  reset () {\n    this._currentIndex = 0\n    show(this._element, this._currentIndex)\n  }\n\n  destroy () {\n    this._steps.forEach(step => {\n      const trigger = step.querySelector(Selectors.TRIGGER)\n\n      if (this.options.linear) {\n        trigger.removeEventListener('click', clickStepLinearListener)\n      } else {\n        trigger.removeEventListener('click', clickStepNonLinearListener)\n      }\n    })\n\n    this._element[customProperty] = undefined\n    this._element = undefined\n    this._currentIndex = undefined\n    this._steps = undefined\n    this._stepsContents = undefined\n  }\n}\n\nexport default Stepper\n"],"names":["matches","window","Element","prototype","closest","element","selector","WinEvent","inType","params","Event","createCustomEvent","eventName","CustomEvent","msMatchesSelector","webkitMatchesSelector","document","documentElement","contains","call","parentElement","parentNode","nodeType","e","createEvent","initEvent","Boolean","bubbles","cancelable","originPreventDefault","preventDefault","evt","detail","initCustomEvent","this","Object","defineProperty","get","polyfill","Selectors","STEPS","TRIGGER","STEPPER","ClassName","ACTIVE","LINEAR","BLOCK","NONE","FADE","transitionEndEvent","customProperty","show","stepperNode","indexStep","stepper","_steps","classList","_stepsContents","showEvent","dispatchEvent","activeStep","filter","step","activeContent","content","defaultPrevented","length","remove","showStep","showContent","stepList","forEach","trigger","querySelector","setAttribute","add","currentTrigger","removeAttribute","contentList","shownEvent","indexOf","duration","getTransitionDurationFromElement","addEventListener","complete","removeEventListener","emulateTransitionEnd","transitionDuration","getComputedStyle","parseFloat","split","called","emulatedDuration","listener","setTimeout","detectAnimation","animation","clickStepLinearListener","event","clickStepNonLinearListener","target","stepIndex","_currentIndex","DEFAULT_OPTIONS","linear","_options","_element","slice","querySelectorAll","hasAttribute","_this","push","getAttribute","options","_setLinkListeners","value","writable","_this2","next","previous","to","stepNumber","tempIndex","reset","destroy","_this3","undefined"],"mappings":"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"}