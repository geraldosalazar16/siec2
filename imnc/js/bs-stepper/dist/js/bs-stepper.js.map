{"version":3,"file":"bs-stepper.js","sources":["../../src/js/polyfill.js","../../src/js/util.js","../../src/js/listeners.js","../../src/js/index.js"],"sourcesContent":["let matches = window.Element.prototype.matches\nlet closest = (element, selector) => element.closest(selector)\nlet WinEvent = (inType, params) => new window.Event(inType, params)\nlet createCustomEvent = (eventName, params) => {\n  const cEvent = new window.CustomEvent(eventName, params)\n\n  return cEvent\n}\n\n/* istanbul ignore next */\nfunction polyfill () {\n  if (!window.Element.prototype.matches) {\n    matches = window.Element.prototype.msMatchesSelector ||\n      window.Element.prototype.webkitMatchesSelector\n  }\n\n  if (!window.Element.prototype.closest) {\n    closest = (element, selector) => {\n      if (!document.documentElement.contains(element)) {\n        return null\n      }\n\n      do {\n        if (matches.call(element, selector)) {\n          return element\n        }\n\n        element = element.parentElement || element.parentNode\n      } while (element !== null && element.nodeType === 1)\n\n      return null\n    }\n  }\n\n  if (!window.Event || typeof window.Event !== 'function') {\n    WinEvent = (inType, params) => {\n      params = params || {}\n      const e = document.createEvent('Event')\n      e.initEvent(inType, Boolean(params.bubbles), Boolean(params.cancelable))\n      return e\n    }\n  }\n\n  if (typeof window.CustomEvent !== 'function') {\n    const originPreventDefault = window.Event.prototype.preventDefault\n\n    createCustomEvent = (eventName, params) => {\n      const evt = document.createEvent('CustomEvent')\n\n      params = params || { bubbles: false, cancelable: false, detail: null }\n      evt.initCustomEvent(eventName, params.bubbles, params.cancelable, params.detail)\n      evt.preventDefault = function () {\n        if (!this.cancelable) {\n          return\n        }\n\n        originPreventDefault.call(this)\n        Object.defineProperty(this, 'defaultPrevented', {\n          get: function () { return true }\n        })\n      }\n\n      return evt\n    }\n  }\n}\n\npolyfill()\n\nexport {\n  closest,\n  WinEvent,\n  createCustomEvent\n}\n","import { WinEvent, createCustomEvent } from './polyfill'\n\nconst MILLISECONDS_MULTIPLIER = 1000\nconst Selectors = {\n  STEPS: '.step',\n  TRIGGER: '.step-trigger',\n  STEPPER: '.bs-stepper'\n}\n\nconst ClassName = {\n  ACTIVE: 'active',\n  LINEAR: 'linear',\n  BLOCK: 'dstepper-block',\n  NONE: 'dstepper-none',\n  FADE: 'fade'\n}\n\nconst transitionEndEvent = 'transitionend'\nconst customProperty = 'bsStepper'\n\nconst show = (stepperNode, indexStep) => {\n  const stepper = stepperNode[customProperty]\n\n  if (stepper._steps[indexStep].classList.contains(ClassName.ACTIVE) || stepper._stepsContents[indexStep].classList.contains(ClassName.ACTIVE)) {\n    return\n  }\n\n  const showEvent = createCustomEvent('show.bs-stepper', {\n    cancelable: true,\n    detail: {\n      indexStep\n    }\n  })\n  stepperNode.dispatchEvent(showEvent)\n\n  const activeStep = stepper._steps.filter(step => step.classList.contains(ClassName.ACTIVE))\n  const activeContent = stepper._stepsContents.filter(content => content.classList.contains(ClassName.ACTIVE))\n\n  if (showEvent.defaultPrevented) {\n    return\n  }\n\n  if (activeStep.length) {\n    activeStep[0].classList.remove(ClassName.ACTIVE)\n  }\n  if (activeContent.length) {\n    activeContent[0].classList.remove(ClassName.ACTIVE)\n    activeContent[0].classList.remove(ClassName.BLOCK)\n  }\n\n  showStep(stepperNode, stepper._steps[indexStep], stepper._steps)\n  showContent(stepperNode, stepper._stepsContents[indexStep], stepper._stepsContents, activeContent)\n}\n\nconst showStep = (stepperNode, step, stepList) => {\n  stepList.forEach(step => {\n    const trigger = step.querySelector(Selectors.TRIGGER)\n\n    trigger.setAttribute('aria-selected', 'false')\n    // if stepper is in linear mode, set disabled attribute on the trigger\n    if (stepperNode.classList.contains(ClassName.LINEAR)) {\n      trigger.setAttribute('disabled', 'disabled')\n    }\n  })\n\n  step.classList.add(ClassName.ACTIVE)\n  const currentTrigger = step.querySelector(Selectors.TRIGGER)\n\n  currentTrigger.setAttribute('aria-selected', 'true')\n  // if stepper is in linear mode, remove disabled attribute on current\n  if (stepperNode.classList.contains(ClassName.LINEAR)) {\n    currentTrigger.removeAttribute('disabled')\n  }\n}\n\nconst showContent = (stepperNode, content, contentList, activeContent) => {\n  const shownEvent = createCustomEvent('shown.bs-stepper', {\n    cancelable: true,\n    detail: {\n      indexStep: contentList.indexOf(content)\n    }\n  })\n\n  function complete () {\n    content.classList.add(ClassName.BLOCK)\n    content.removeEventListener(transitionEndEvent, complete)\n    stepperNode.dispatchEvent(shownEvent)\n  }\n\n  if (content.classList.contains(ClassName.FADE)) {\n    content.classList.remove(ClassName.NONE)\n    const duration = getTransitionDurationFromElement(content)\n\n    content.addEventListener(transitionEndEvent, complete)\n    if (activeContent.length) {\n      activeContent[0].classList.add(ClassName.NONE)\n    }\n\n    content.classList.add(ClassName.ACTIVE)\n    emulateTransitionEnd(content, duration)\n  } else {\n    content.classList.add(ClassName.ACTIVE)\n    stepperNode.dispatchEvent(shownEvent)\n  }\n}\n\nconst getTransitionDurationFromElement = element => {\n  if (!element) {\n    return 0\n  }\n\n  // Get transition-duration of the element\n  let transitionDuration = window.getComputedStyle(element).transitionDuration\n  const floatTransitionDuration = parseFloat(transitionDuration)\n\n  // Return 0 if element or transition duration is not found\n  if (!floatTransitionDuration) {\n    return 0\n  }\n\n  // If multiple durations are defined, take the first\n  transitionDuration = transitionDuration.split(',')[0]\n\n  return parseFloat(transitionDuration) * MILLISECONDS_MULTIPLIER\n}\n\nconst emulateTransitionEnd = (element, duration) => {\n  let called = false\n  const durationPadding = 5\n  const emulatedDuration = duration + durationPadding\n  function listener () {\n    called = true\n    element.removeEventListener(transitionEndEvent, listener)\n  }\n\n  element.addEventListener(transitionEndEvent, listener)\n  window.setTimeout(() => {\n    if (!called) {\n      element.dispatchEvent(WinEvent(transitionEndEvent))\n    }\n\n    element.removeEventListener(transitionEndEvent, listener)\n  }, emulatedDuration)\n}\n\nconst detectAnimation = (contentList, animation) => {\n  if (animation) {\n    contentList.forEach(content => {\n      content.classList.add(ClassName.FADE)\n      content.classList.add(ClassName.NONE)\n    })\n  }\n}\n\nexport {\n  show,\n  Selectors,\n  ClassName,\n  customProperty,\n  detectAnimation\n}\n","import { closest } from './polyfill'\nimport { Selectors, customProperty, show } from './util'\n\nfunction clickStepLinearListener (event) {\n  event.preventDefault()\n}\n\nfunction clickStepNonLinearListener (event) {\n  event.preventDefault()\n\n  const step = closest(event.target, Selectors.STEPS)\n  const stepperNode = closest(step, Selectors.STEPPER)\n  const stepper = stepperNode[customProperty]\n  const stepIndex = stepper._steps.indexOf(step)\n\n  stepper._currentIndex = stepIndex\n  show(stepperNode, stepIndex)\n}\n\nexport {\n  clickStepLinearListener,\n  clickStepNonLinearListener\n}\n","import { show, Selectors, ClassName, customProperty, detectAnimation } from './util'\nimport { clickStepLinearListener, clickStepNonLinearListener } from './listeners'\n\nconst DEFAULT_OPTIONS = {\n  linear: true,\n  animation: false\n}\n\nclass Stepper {\n  constructor (element, _options = {}) {\n    this._element = element\n    this._currentIndex = 0\n    this._stepsContents = []\n    this._steps = [].slice.call(this._element.querySelectorAll(Selectors.STEPS))\n      .filter(step => step.hasAttribute('data-target'))\n\n    this._steps.forEach(step => {\n      this._stepsContents.push(\n        this._element.querySelector(step.getAttribute('data-target'))\n      )\n    })\n\n    this.options = {\n      ...DEFAULT_OPTIONS,\n      ..._options\n    }\n\n    if (this.options.linear) {\n      this._element.classList.add(ClassName.LINEAR)\n    }\n\n    detectAnimation(this._stepsContents, this.options.animation)\n    this._setLinkListeners()\n    Object.defineProperty(this._element, customProperty, {\n      value: this,\n      writable: true\n    })\n\n    if (this._steps.length) {\n      show(this._element, this._currentIndex)\n    }\n  }\n\n  // Private\n\n  _setLinkListeners () {\n    this._steps.forEach(step => {\n      const trigger = step.querySelector(Selectors.TRIGGER)\n      if (this.options.linear) {\n        trigger.addEventListener('click', clickStepLinearListener)\n      } else {\n        trigger.addEventListener('click', clickStepNonLinearListener)\n      }\n    })\n  }\n\n  // Public\n\n  next () {\n    this._currentIndex = (this._currentIndex + 1) <= this._steps.length - 1 ? this._currentIndex + 1 : (this._steps.length - 1)\n\n    show(this._element, this._currentIndex)\n  }\n\n  previous () {\n    this._currentIndex = (this._currentIndex - 1) >= 0 ? this._currentIndex - 1 : 0\n\n    show(this._element, this._currentIndex)\n  }\n\n  to (stepNumber) {\n    const tempIndex = stepNumber - 1\n\n    this._currentIndex = tempIndex >= 0 && tempIndex < this._steps.length\n      ? tempIndex\n      : 0\n\n    show(this._element, this._currentIndex)\n  }\n\n  reset () {\n    this._currentIndex = 0\n    show(this._element, this._currentIndex)\n  }\n\n  destroy () {\n    this._steps.forEach(step => {\n      const trigger = step.querySelector(Selectors.TRIGGER)\n\n      if (this.options.linear) {\n        trigger.removeEventListener('click', clickStepLinearListener)\n      } else {\n        trigger.removeEventListener('click', clickStepNonLinearListener)\n      }\n    })\n\n    this._element[customProperty] = undefined\n    this._element = undefined\n    this._currentIndex = undefined\n    this._steps = undefined\n    this._stepsContents = undefined\n  }\n}\n\nexport default Stepper\n"],"names":["matches","window","Element","prototype","closest","element","selector","WinEvent","inType","params","Event","createCustomEvent","eventName","cEvent","CustomEvent","polyfill","msMatchesSelector","webkitMatchesSelector","document","documentElement","contains","call","parentElement","parentNode","nodeType","e","createEvent","initEvent","Boolean","bubbles","cancelable","originPreventDefault","preventDefault","evt","detail","initCustomEvent","Object","defineProperty","get","MILLISECONDS_MULTIPLIER","Selectors","STEPS","TRIGGER","STEPPER","ClassName","ACTIVE","LINEAR","BLOCK","NONE","FADE","transitionEndEvent","customProperty","show","stepperNode","indexStep","stepper","_steps","classList","_stepsContents","showEvent","dispatchEvent","activeStep","filter","step","activeContent","content","defaultPrevented","length","remove","showStep","showContent","stepList","forEach","trigger","querySelector","setAttribute","add","currentTrigger","removeAttribute","contentList","shownEvent","indexOf","complete","removeEventListener","duration","getTransitionDurationFromElement","addEventListener","emulateTransitionEnd","transitionDuration","getComputedStyle","floatTransitionDuration","parseFloat","split","called","durationPadding","emulatedDuration","listener","setTimeout","detectAnimation","animation","clickStepLinearListener","event","clickStepNonLinearListener","target","stepIndex","_currentIndex","DEFAULT_OPTIONS","linear","Stepper","_options","_element","slice","querySelectorAll","hasAttribute","push","getAttribute","options","_setLinkListeners","value","writable","next","previous","to","stepNumber","tempIndex","reset","destroy","undefined"],"mappings":"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"}